@use '../../mixins/sprite-mixins';

$_svg-sprite-url: '{{{stylesheetSpriteUrl}}}{{{sprite}}}';
$_svg-sprite-height: {{spriteHeight}}px;
$_svg-sprite-width: {{spriteWidth}}px;
$_svg-sprite-size: $_svg-sprite-width $_svg-sprite-height;

{{#shapes}}
$_svg-sprite-{{base}}-x: {{position.absolute.x}}px;
$_svg-sprite-{{base}}-y: {{position.absolute.y}}px;
$svg-sprite-{{base}}-width: {{width.outer}}px;
$svg-sprite-{{base}}-height: {{height.outer}}px;
$svg-sprite-{{base}}: $_svg-sprite-url $_svg-sprite-{{base}}-x $_svg-sprite-{{base}}-y $svg-sprite-{{base}}-width $svg-sprite-{{base}}-height $_svg-sprite-size;

{{/shapes}}

@mixin {{mixinName}}($sprite) {
{{!--    //@include sprite-mixins.sprite($sprite, $-svg-sprite-url<% if (options.pixelRatio !== 1) { %>, $-<%= spriteName %>-size<% } %>);--}}
    @include sprite-mixins.sprite($sprite);

    // Uncomment to use private mixins instead of external sprite functions/mixins
    // @include _{{mixinName}}-image;<% if (options.pixelRatio !== 1) { %>
    // @include _{{mixinName}}-size;<% } %>
    // @include _{{mixinName}}-position($sprite);
    // @include _{{mixinName}}-width($sprite);
    // @include _{{mixinName}}-height($sprite);
}
@mixin _{{mixinName}}-image {
    background-image: url("#{$_svg-sprite-url}");
    background-repeat: no-repeat;
}
// TODO: is pixelRatio available in the svg-sprite generator?
// <% if (options.pixelRatio !== 1) { %>
//@mixin _{{mixinName}}-size {
//    background-size: #{$_svg-sprite-size};
//}<% } %>
@mixin _{{mixinName}}-position($sprite) {
    @if $sprite and length($sprite) > 2 {
        background-position: nth($sprite, 2) nth($sprite, 3);
    }
}
@mixin _{{mixinName}}-width($sprite) {
    @if $sprite and length($sprite) > 3 {
        width: nth($sprite, 4);
    }
}
@mixin _{{mixinName}}-height($sprite) {
    @if $sprite and length($sprite) > 4 {
        height: nth($sprite, 5);
    }
}
@mixin {{mixinName}}-utilities {
    {{#hasMixin}}{{#hasCommon}}.{{commonName}} {
        @include _{{mixinName}}-image;
    }
    {{/hasCommon}}{{/hasMixin}}{{^hasMixin}}{{#hasCommon}}.{{/hasCommon}}{{^hasCommon}}%{{/hasCommon}}{{commonName}} {
        background-image: url("{{{stylesheetSpriteUrl}}}{{{sprite}}}");
        background-repeat: no-repeat;
    }
    {{/hasMixin}}

{{#shapes}}
    {{#selector.shape}}{{expression}}{{^last}},
    {{/last}}{{/selector.shape}} {
        @include sprite-mixins.sprite($svg-sprite-{{base}});

        // Uncomment to use private mixins instead of external sprite functions/mixins
        // @include _{{mixinName}}-image;<% if (options.pixelRatio !== 1) { %>
        // @include _{{mixinName}}-size;<% } %>
        // @include _{{mixinName}}-position($svg-sprite-{{base}});
        // @include _{{mixinName}}-width($svg-sprite-{{base}});
        // @include _{{mixinName}}-height($svg-sprite-{{base}});
    }
    {{#dimensions.extra}}

    {{#selector.dimensions}}{{expression}}{{^last}},
    {{/last}}{{/selector.dimensions}} {
        @include sprite-mixins.sprite-width($svg-sprite-{{base}});
        @include sprite-mixins.sprite-height($svg-sprite-{{base}});

        // Uncomment to use private mixins instead of external sprite functions/mixins
        // @include _{{mixinName}}-width($svg-sprite-{{base}});
        // @include _{{mixinName}}-height($svg-sprite-{{base}});
    }{{/dimensions.extra}}

{{/shapes}}
}
